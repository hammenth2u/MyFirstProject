{% extends 'base.html.twig' %}

{% block title %}Project{% endblock %}

{% block body %}
<section class="container">
<div class="columns has-text-centered is-multiline is-centered">
   <div class="column dashboard is-full has-text-centered">
        <i class="fas fa-tasks mr-1"></i></i>Tâches
    </div>

    <div class="column task has-background-grey-lighter has-text-grey-dark">
        <nav class="level">
         <div class="level-item has-text-centered">
         <div>
          <p class="heading">Tâches créées</p>
          <p class="title">{{ cardsNew|length }}</p>
         </div>
        </div>
    </div>

    <div class="column task has-background-warning has-text-grey-dark">
        <nav class="level">
         <div class="level-item has-text-centered">
         <div>
          <p class="heading">Tâches en cours</p>
          <p class="title">0</p>
         </div>
        </div>
    </div>

    <div class="column task has-background-success has-text-grey-dark">
        <nav class="level">
         <div class="level-item has-text-centered">
         <div>
          <p class="heading">Tâches terminées</p>
          <p class="title">0</p>
         </div>
        </div>
    </div>

   </div>
   <div class="column is-full has-text-centered">
    {#% for userProject in userProjects %}
        <li>{{ userProject.name }}</li>
    {% else %#}
   <i class="fas fa-exclamation-circle mr-1"></i>Aucune tâche
   {#% endfor %#}
   </div>
   <div class="column has-text-centered is-centered">
   <button id="modal" class="button is-danger is-rounded"><i class="fas fa-plus mr-1"></i>Créer une nouvelle tâche</button>
   </div>
</div>
</section>

<div class="modal has-text-grey">
  <div class="modal-background"></div>
   <form method="post">
  <div class="modal-card">
    <header class="modal-card-head">
      <p class="modal-card-title">Créer une nouvelle tâche</p>
      <button class="delete close" aria-label="close"></button>
    </header>
    <section class="modal-card-body">
      {{ form_start(cardForm) }}
            <div class="control">
               <div class="inline">
                  {{ form_label(cardForm.name) }}
                  {{ form_errors(cardForm.name) }}
                  <p class="control has-icons-left has-icons-right">
                     {{ form_widget(cardForm.name, {'attr': {'class': 'input', 'placeholder' : 'Nom de la tâche'}}) }}
                     <span class="icon is-small is-left">
                     <i class="fas fa-tasks"></i>
                     </span>
                  </p>
               </div>
               <div class="field">
                  <div class="control">
                  {{ form_label(cardForm.description) }}
                  {{ form_errors(cardForm.description) }}
                     {{ form_widget(cardForm.description, {'attr': {'class': 'textarea', 'placeholder' : 'Description'}}) }}
                  </div>
               </div>
      {{ form_end(cardForm) }}
    </section>
    </form>
    <footer class="modal-card-foot">
      <button id="button" type="submit" class="button is-success">Créer une nouvelle tâche</button>
      <button class="button close">Annuler</button>
    </footer>
  </div>
</div>

<script>
$("#modal").click(function() {
  $(".modal").addClass("is-active");  
});

$(".close").click(function() {
   $(".modal").removeClass("is-active");
});
</script>

{% endblock %}